<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>C√©lula Ra√≠zes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./src/styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="branding">
      <h1>C√©lula Ra√≠zes</h1>
      <span class="tagline">Firmados em Cristo</span>
    </div>
    <button id="menuToggle" class="menu-toggle" aria-label="Menu">
      ‚ò∞
    </button>
    <nav id="mainNav" class="nav">
      <button data-section="home" class="nav-link active">In√≠cio</button>
      <button data-section="birthdays" class="nav-link">Anivers√°rios</button>
      <button data-section="agenda" class="nav-link">Agenda</button>
      <button data-section="schedules" class="nav-link">Escala</button>
      <button data-section="photos" class="nav-link">Fotos</button>
      <button data-section="admin" class="nav-link nav-link-admin">Admin</button>
    </nav>
  </header>

  <main>
    <!-- P√öBLICO: IN√çCIO -->
    <section id="section-home" class="section active">
      <div class="hero">
        <h2>C√©lula Ra√≠zes</h2>        
      </div>

      <!-- Navega√ß√£o r√°pida (cards) -->
      <section class="home-nav-grid" aria-label="Navega√ß√£o r√°pida">
        <button class="home-nav-card" data-section="birthdays">
          <span class="home-nav-icon">üéâ</span>
          <h3>Aniversariantes</h3>
          <p>Celebre com quem faz anivers√°rio.</p>
        </button>
        <button class="home-nav-card" data-section="agenda">
          <span class="home-nav-icon">üìÖ</span>
          <h3>Agenda</h3>
          <p>Pr√≥ximos eventos e reuni√µes.</p>
        </button>
        <button class="home-nav-card" data-section="schedules">
          <span class="home-nav-icon">üë•</span>
          <h3>Escala</h3>
          <p>Fun√ß√µes de cada c√©lula.</p>
        </button>
        <button class="home-nav-card" data-section="photos">
          <span class="home-nav-icon">üì∑</span>
          <h3>Fotos</h3>
          <p>Galeria de fotos da c√©lula.</p>
        </button>
      </section>

      <!-- Vers√≠culos em destaque -->
      <section class="verses" aria-label="Vers√≠culos do tema">
        <article class="verse-card">
          <h4>Jeremias 17:7‚Äì8</h4>
          <p class="verse-text">
            ‚ÄúBendito o homem que confia no Senhor, e cuja confian√ßa √© o Senhor. Porque ser√°
            como a √°rvore plantada junto √†s √°guas, que estende as suas ra√≠zes para o ribeiro,
            e n√£o receia quando vem o calor, mas a sua folha fica verde; e no ano de sequid√£o
            n√£o se afadiga, nem deixa de dar fruto.‚Äù
          </p>
        </article>
        <article class="verse-card">
          <h4>Colossenses 2:6‚Äì7</h4>
          <p class="verse-text">
            ‚ÄúComo, pois, recebestes o Senhor Jesus Cristo, assim tamb√©m andai nele; arraigados
            e edificados nele, e confirmados na f√©, assim como fostes ensinados, abundando em
            a√ß√£o de gra√ßas.‚Äù
          </p>
        </article>
      </section>

      <section id="birthdayBanner" class="banner hidden">
        <h3>Aniversariantes deste m√™s</h3>
        <ul id="birthdayBannerList"></ul>
      </section>
    </section>

    <!-- P√öBLICO: ANIVERS√ÅRIOS -->
    <section id="section-birthdays" class="section">
      <h2>Anivers√°rios</h2>
      <p class="section-description">
        Veja os aniversariantes deste m√™s e do pr√≥ximo.
      </p>
      <ul id="birthdayList" class="card-list"></ul>
    </section>

    <!-- P√öBLICO: AGENDA -->
    <section id="section-agenda" class="section">
      <h2>Agenda</h2>
      <p class="section-description">
        Pr√≥ximos eventos e encontros da c√©lula.
      </p>
      <ul id="agendaList" class="card-list"></ul>
    </section>

    <!-- P√öBLICO: ESCALAS -->
    <section id="section-schedules" class="section">
      <h2>Escala da C√©lula</h2>
      <p class="section-description">
        Acompanhe as pr√≥ximas escalas de servi√ßo.
      </p>
      <div id="scheduleList" class="card-list"></div>
    </section>

    <!-- P√öBLICO: FOTOS -->
    <section id="section-photos" class="section">
      <h2>Galeria de Fotos</h2>
      <p class="section-description">
        Momentos marcantes da C√©lula Ra√≠zes.
      </p>
      <div id="photoGrid" class="photo-grid"></div>
    </section>

    <!-- ADMIN -->
    <section id="section-admin" class="section">
      <h2>√Årea Administrativa</h2>

      <!-- LOGIN -->
      <div id="adminLogin" class="card">
        <h3>Login do Admin</h3>
        <form id="loginForm" autocomplete="on">
          <label>
            E-mail
            <input type="email" id="loginEmail" required />
          </label>
          <label>
            Senha
            <input type="password" id="loginPassword" required minlength="6" />
          </label>
          <button type="submit" class="btn-primary">Entrar</button>
          <p id="loginError" class="error-message"></p>
        </form>
      </div>

      <!-- PAINEL ADMIN -->
      <div id="adminDashboard" class="admin-dashboard hidden">
        <div class="admin-header">
          <span id="adminUserEmail"></span>
          <button id="logoutBtn" class="btn-secondary">Sair</button>
        </div>

        <nav class="admin-nav">
          <button data-admin-tab="content" class="admin-tab-link active">
            Conte√∫do P√∫blico
          </button>
          <button data-admin-tab="members" class="admin-tab-link">
            Membros
          </button>
          <button data-admin-tab="attendance" class="admin-tab-link">
            Presen√ßas
          </button>
          <button data-admin-tab="reports" class="admin-tab-link">
            Relat√≥rios
          </button>
        </nav>

        <!-- ABA: CONTE√öDO P√öBLICO -->
        <div id="admin-tab-content" class="admin-tab active">
          <h3>Agenda</h3>
          <form id="agendaForm" class="inline-form">
            <input type="date" id="agendaDate" required />
            <input type="text" id="agendaDescription" placeholder="Descri√ß√£o" required />
            <button type="submit" class="btn-primary">Adicionar</button>
          </form>
          <ul id="adminAgendaList" class="card-list admin-list"></ul>

          <h3>Escalas</h3>
          <form id="scheduleForm" class="stacked-form">
            <label>
              Data da C√©lula
              <input type="date" id="scheduleDate" required />
            </label>
            <label>
              Quebra-gelo
              <select id="scheduleIcebreaker"></select>
            </label>
            <label>
              Louvor
              <select id="scheduleWorship"></select>
            </label>
            <label>
              Lanche
              <select id="scheduleSnack"></select>
            </label>
            <label>
              M√≠dia
              <select id="scheduleMedia"></select>
            </label>
            <button type="submit" class="btn-primary">Salvar Escala</button>
          </form>
          <ul id="adminScheduleList" class="card-list admin-list"></ul>

          <h3>Fotos</h3>
          <form id="photoUploadForm" class="stacked-form">
            <input type="file" id="photoFile" accept="image/*" required />
            <button type="submit" class="btn-primary">Enviar Foto</button>
            <p id="photoUploadError" class="error-message"></p>
          </form>
          <div id="photoPreview" class="photo-preview"></div>
        </div>

        <!-- ABA: MEMBROS -->
        <div id="admin-tab-members" class="admin-tab">
          <h3>Membros</h3>
          <form id="memberForm" class="stacked-form">
            <input type="hidden" id="memberId" />
            <label>
              Nome completo
              <input type="text" id="memberName" required />
            </label>
            <label>
              Tipo
              <select id="memberType" required>
                <option value="Membro">Membro</option>
                <option value="FA">FA</option>
                <option value="Visitante">Visitante</option>
              </select>
            </label>
            <label>
              Data de nascimento
              <input type="date" id="memberBirthDate" required />
            </label>
            <label>
              Ajuste de anivers√°rio (opcional)
              <input type="date" id="memberBirthdayOverride" />
            </label>
            <label>
              Batismo
              <select id="memberBaptism" required>
                <option value="Videira">Videira</option>
                <option value="Outra Igreja">Outra Igreja</option>
                <option value="Nenhum">Nenhum</option>
              </select>
            </label>
            <label>
              Encontro com Deus
              <select id="memberEncounter" required>
                <option value="true">Sim</option>
                <option value="false">N√£o</option>
              </select>
            </label>
            <fieldset class="courses">
              <legend>Cursos</legend>
              <label><input type="checkbox" value="Ceifeiros" /> Ceifeiros</label>
              <label><input type="checkbox" value="Maturidade" /> Maturidade</label>
              <label><input type="checkbox" value="CTL" /> CTL</label>
              <label><input type="checkbox" value="Pastoral" /> Pastoral</label>
            </fieldset>
            <button type="submit" class="btn-primary">Salvar Membro</button>
            <p id="memberFormError" class="error-message"></p>
          </form>

          <table class="table" id="memberTable">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Tipo</th>
                <th>Nascimento</th>
                <th>Batismo</th>
                <th>Encontro</th>
                <th>Cursos</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- ABA: PRESEN√áAS -->
        <div id="admin-tab-attendance" class="admin-tab">
          <h3>Presen√ßas</h3>
          <form id="attendanceForm" class="stacked-form">
            <label>
              Data da c√©lula
              <input type="date" id="attendanceDate" required />
            </label>
            <div id="attendanceMembers" class="attendance-list"></div>

            <label>
              Visitantes (um por linha)
              <textarea id="attendanceVisitors" rows="3" placeholder="Nome do visitante"></textarea>
            </label>
            <button type="submit" class="btn-primary">Salvar Presen√ßas</button>
            <p id="attendanceError" class="error-message"></p>
          </form>
        </div>

        <!-- ABA: RELAT√ìRIOS -->
        <div id="admin-tab-reports" class="admin-tab">
          <h3>Relat√≥rios</h3>
          <form id="reportFilterForm" class="inline-form">
            <label>
              In√≠cio
              <input type="date" id="reportStart" />
            </label>
            <label>
              Fim
              <input type="date" id="reportEnd" />
            </label>
            <button type="submit" class="btn-secondary">Atualizar</button>
          </form>

          <div class="reports-grid">
            <div class="card">
              <h4>Presen√ßa por Encontro</h4>
              <canvas id="attendanceByMeetingChart"></canvas>
            </div>
            <div class="card">
              <h4>M√©dia Geral de Presen√ßa</h4>
              <p id="overallAttendanceAvg"></p>
            </div>
            <div class="card">
              <h4>Presen√ßa por Membro</h4>
              <canvas id="attendanceByMemberChart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Supabase: injete URL e anon key antes do script do app (veja README) -->
  <script>
    window.SUPABASE_URL = "https://sxvdzghltsmsvjjorvoc.supabase.co";
    window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4dmR6Z2hsdHNtc3Zqam9ydm9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2Njg0NzIsImV4cCI6MjA4NjI0NDQ3Mn0.josowwt8D1cYhnotJz93vggUuQPv3iNIMBcSpUdrdMM";
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" crossorigin="anonymous"></script>
  <script type="module" src="./src/app.js"></script>
</body>
</html>

